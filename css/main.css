@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --primary-color-rgb: 59 130 246; /* Blue 500 */
    --primary-hover-color-rgb: 37 99 235; /* Blue 600 */
    --background-color-rgb: 249 250 251; /* Gray 50 */
    --content-bg-rgb: 255 255 255;
    --text-color-rgb: 55 65 81; /* Gray 700 */
    --subtle-text-color-rgb: 107 114 128; /* Gray 500 */
    --border-color-rgb: 229 231 235; /* Gray 200 */
    --danger-color-rgb: 239 68 68; /* Red 500 */
    --success-color-rgb: 34 197 94; /* Green 500 */
    --warning-color-rgb: 245 158 11; /* Amber 500 */
    --sidebar-text-rgb: 75 85 99; /* Gray 600 */

    /* For reference and potential non-tailwind usage */
    --primary-color: rgb(var(--primary-color-rgb));
    --primary-hover-color: rgb(var(--primary-hover-color-rgb));
    --background-color: rgb(var(--background-color-rgb));
    --content-bg: rgb(var(--content-bg-rgb));
    --text-color: rgb(var(--text-color-rgb));
    --subtle-text-color: rgb(var(--subtle-text-color-rgb));
    --border-color: rgb(var(--border-color-rgb));
    --danger-color: rgb(var(--danger-color-rgb));
    --success-color: rgb(var(--success-color-rgb));
    --warning-color: rgb(var(--warning-color-rgb));
    --sidebar-text: rgb(var(--sidebar-text-rgb));

    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  }

  html.dark {
    --primary-color-rgb: 96 165 250; /* Blue 400 */
    --primary-hover-color-rgb: 59 130 246; /* Blue 500 */
    --background-color-rgb: 17 24 39; /* Gray 900 */
    --content-bg-rgb: 31 41 55; /* Gray 800 */
    --text-color-rgb: 209 213 219; /* Gray 300 */
    --subtle-text-color-rgb: 156 163 175; /* Gray 400 */
    --border-color-rgb: 55 65 81; /* Gray 700 */
    --danger-color-rgb: 248 113 113; /* Red 400 */
    --success-color-rgb: 74 222 128; /* Green 400 */
    --warning-color-rgb: 251 191 36; /* Amber 400 */
    --sidebar-text-rgb: 209 213 219;
  }

  body {
    font-family: 'Inter', sans-serif;
    @apply bg-background text-text-main antialiased;
  }
}

@layer components {
  /* == Tasks Page (Redesigned) == */
  .tasks-board-container {
    @apply inline-flex h-full space-x-4 p-1;
  }

  .tasks-board-column {
    @apply flex-shrink-0 w-80 h-full flex flex-col bg-background rounded-lg;
  }

  .tasks-board-column-header {
    @apply px-3 pt-3 pb-2 font-semibold text-text-main flex justify-between items-center border-b border-border-color;
  }

  .tasks-board-column-body {
    @apply flex-1 min-h-0 overflow-y-auto p-2 space-y-2;
    scrollbar-width: thin;
    scrollbar-color: var(--border-color) transparent;
  }
  .tasks-board-column-body::-webkit-scrollbar {
    width: 6px;
  }
  .tasks-board-column-body::-webkit-scrollbar-track {
    background: transparent;
  }
  .tasks-board-column-body::-webkit-scrollbar-thumb {
    background-color: var(--border-color);
    border-radius: 3px;
  }

  /* Redesigned Task Card */
  .task-card {
    @apply bg-content p-3 rounded-md shadow-sm border border-border-color space-y-2.5 cursor-pointer transition-shadow hover:shadow-md;
  }

  .task-card-header {
    @apply flex justify-between items-start gap-2;
  }

  .task-card-name {
    @apply font-medium text-sm text-text-main leading-tight;
  }
  
  .task-card .btn-icon {
    @apply text-text-subtle w-6 h-6 flex-shrink-0 -mr-1 -mt-1;
  }
  .task-card .btn-icon:hover {
    @apply bg-background text-text-main;
  }

  /* Checklist Styles */
  .task-card-checklist {
    @apply space-y-1.5;
  }
  .task-card-checklist-item {
    @apply flex items-center gap-2 text-sm text-text-main;
  }
  .task-card-checklist-item.completed .checklist-item-text {
    @apply line-through text-text-subtle;
  }
  .task-card-checklist-item .material-icons-sharp {
    @apply text-lg text-text-subtle;
  }
  .task-card-checklist-item.completed .material-icons-sharp {
    @apply text-primary;
  }
  
  /* Priority Label */
  .task-card-priority {
    @apply text-sm font-medium text-text-subtle;
  }

  /* Footer and Stats */
  .task-card-footer {
    @apply flex flex-wrap justify-between items-center gap-2;
  }

  .task-card-stats {
    @apply flex items-center flex-wrap gap-x-3 gap-y-1 text-xs text-text-subtle;
  }
  .stat-item {
    @apply flex items-center gap-1;
  }
  .stat-item .material-icons-sharp {
    @apply text-base;
  }

  /* Avatar Stack for Task Card */
  .avatar-stack {
    @apply flex -space-x-2;
  }
  .avatar-small {
    @apply w-6 h-6 rounded-full bg-primary/20 text-primary flex items-center justify-center text-xs font-semibold border-2 border-content;
  }
  .more-avatar {
    @apply bg-background text-text-subtle;
  }

  /* Task Card Context Menu */
  .task-card-menu {
    @apply absolute z-20 bg-content rounded-md shadow-lg border border-border-color w-40 flex flex-col py-1;
  }
  .task-menu-item {
    @apply flex items-center gap-2 px-3 py-1.5 text-sm text-left w-full hover:bg-background;
  }
  .task-menu-item.danger {
    @apply text-danger;
  }
  .task-menu-item.danger:hover {
    @apply bg-danger/10;
  }
  .task-menu-item .material-icons-sharp {
    @apply text-base text-text-subtle;
  }
  .task-menu-item.danger .material-icons-sharp {
    @apply text-danger;
  }
}
